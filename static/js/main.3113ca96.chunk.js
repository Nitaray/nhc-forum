(this["webpackJsonpnhc-forum"]=this["webpackJsonpnhc-forum"]||[]).push([[0],{105:function(e,t,r){},131:function(e,t,r){},132:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r(0),s=r.n(n),c=r(11),o=r.n(c),i=(r(105),r(69)),l=r(41),u=r(13),d=r(22),h=r(23),p=r(38),j=r(26),b=r(25),m=r(160),g=r(163),v=r(134),O=r(190),x=r(186),f=r(165),w=r(166),y=r(55),k=r(89),C=r.n(k),T=function(e,t){var r={email:{type:"email",pattern:/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/},username:{type:"username",pattern:/^(?=.{6,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9]+(?<![_.])$/},password:{type:"password",pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/}};for(var a in r)if(r[a].type===t)return r[a].pattern.test(e);return!1},S=r(8),P=r.n(S),N=r(15),L="https://nhc-forum.herokuapp.com",M=L,B="/api/register",H=r(19),A=function(){var e=Object(N.a)(P.a.mark((function e(t,r){var a,n,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={success:!1,userID:"",userToken:""},n={Username:t,Password:r},M+"/api/login",e.prev=3,e.next=6,Object(H.post)("https://nhc-forum.herokuapp.com/api/login",n);case 6:return s=e.sent,a.success=!0,a.userID=s.data.UserID,a.userToken=s.data.UserToken,e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(N.a)(P.a.mark((function e(t,r){var a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Logging out with ".concat(t," and ").concat(r)),a={success:!1},n={UserID:t,UserToken:r},M+"/api/logout",e.prev=4,e.next=7,Object(H.post)("https://nhc-forum.herokuapp.com/api/logout",n);case 7:return a.success=!0,e.abrupt("return",a);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,r){return e.apply(this,arguments)}}();function I(){return(I=Object(N.a)(P.a.mark((function e(t,r,a){var n,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={success:!1},s={Email:t,Username:r,Password:a},M+B,e.prev=3,e.next=6,Object(H.post)("https://nhc-forum.herokuapp.com/api/register",s);case 6:return n.success=!0,e.abrupt("return",n);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}r(84);var F=function(e){Object(j.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).state={username:{value:"",incorrect:!1,errorMsg:""},password:{value:""},redirect:[]},a.handleLogin=a.handleLogin.bind(Object(p.a)(a)),a}return Object(h.a)(r,[{key:"handleLogin",value:function(e,t){var r=this;console.log("Logging in"),A(e,t).then((function(e){if(e.success){var t=e.userID,a=e.userToken;r.props.session.idHandler(t),r.props.session.tokenHandler(a),console.log("Logged in with token ".concat(a)),console.log(r.props.session)}else alert("Login error! Please try again!")}));var n=Object(a.jsx)(u.a,{to:"/"});this.setState({redirect:[n]}),console.log(this.state.redirect)}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(m.a,{container:!0,className:"root",children:[Object(a.jsx)(g.a,{}),Object(a.jsx)(m.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0}),Object(a.jsx)(m.a,{item:!0,xs:12,sm:8,md:6,lg:4,children:Object(a.jsx)("div",{align:"center",children:Object(a.jsxs)(v.a,{className:"paper",variant:"outlined",children:[Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"LOGIN TO NHC FORUM"})}),Object(a.jsx)("div",{children:Object(a.jsx)(O.a,{className:"avatar",children:Object(a.jsx)(C.a,{color:"secondary"})})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(x.a,{id:"username",label:"Username",className:"textfield",type:"text",value:this.state.username.value,variant:"outlined",required:!0,autoComplete:"username",margin:"normal",error:this.state.username.incorrect,helperText:this.state.username.errorMsg,onChange:function(t){var r=T(t.target.value,"username")||""===t.target.value;e.setState({username:{value:t.target.value,incorrect:!r,errorMsg:r?"":"Invalid username"}})}}),Object(a.jsx)(x.a,{id:"password",className:"textfield",label:"Password",type:"password",variant:"outlined",required:!0,autoComplete:"current-password",margin:"normal",onChange:function(t){e.setState({password:{value:t.target.value}})}})]}),Object(a.jsx)("div",{children:Object(a.jsx)(f.a,{variant:"contained",color:"primary",className:"button",onClick:this.state.username.incorrect?function(){e.setState({username:{value:"",incorrect:!0,errorMsg:"Invalid username! Please try again!"}})}:function(){e.handleLogin(e.state.username.value,e.state.password.value)},children:"Login"})}),Object(a.jsx)("div",{children:Object(a.jsx)(m.a,{container:!0,children:Object(a.jsx)(m.a,{item:!0,xs:12,children:Object(a.jsx)(w.a,{component:l.b,to:"/register",children:Object(a.jsx)(y.a,{variant:"body1",align:"center",children:"Don't have an account? Sign up here!"})})})})})]})})}),Object(a.jsx)(m.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0})]}),this.state.redirect]})}}]),r}(s.a.Component),U=function(e){Object(j.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).state={email:{value:"",incorrect:!1,errorMsg:""},username:{value:"",incorrect:!1,errorMsg:""},password:{value:"",incorrect:!1,errorMsg:""},confirmPassword:{value:"",incorrect:!1,errorMsg:""}},a}return Object(h.a)(r,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(m.a,{container:!0,className:"root",children:[Object(a.jsx)(g.a,{}),Object(a.jsx)(m.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0}),Object(a.jsx)(m.a,{item:!0,xs:12,sm:8,md:6,lg:4,children:Object(a.jsx)("div",{align:"center",children:Object(a.jsxs)(v.a,{className:"paper",variant:"outlined",children:[Object(a.jsx)("div",{children:Object(a.jsx)("h1",{children:"Create a new NHC account"})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(x.a,{id:"email",label:"Email",className:"textfield",type:"text",value:this.state.email.value,variant:"outlined",required:!0,autoComplete:"email",margin:"normal",error:this.state.email.incorrect,helperText:this.state.email.errorMsg,onChange:function(t){var r=T(t.target.value,"email")||""===t.target.value;e.setState({email:{value:t.target.value,incorrect:!r,errorMsg:r?"":"Invalid email address"}})}}),Object(a.jsx)(x.a,{id:"username",label:"Username",className:"textfield",type:"text",value:this.state.username.value,variant:"outlined",required:!0,autoComplete:"username",margin:"normal",error:this.state.username.incorrect,helperText:this.state.username.errorMsg,onChange:function(t){var r=T(t.target.value,"username")||""===t.target.value;e.setState({username:{value:t.target.value,incorrect:!r,errorMsg:r?"":"Username must be 6-20 characters long, and does not contain special characters!"}})}}),Object(a.jsx)(x.a,{id:"password",className:"textfield",label:"Password",type:"password",variant:"outlined",required:!0,autoComplete:"new-password",margin:"normal",value:this.state.password.value,error:this.state.password.incorrect,helperText:this.state.password.errorMsg,onChange:function(t){var r=T(t.target.value,"password")||""===t.target.value;e.setState({password:{value:t.target.value,incorrect:!r,errorMsg:r?"":"Password must be at least 8 characters long and contains at least one letter and one number!"}})}}),Object(a.jsx)(x.a,{id:"confirm-password",className:"textfield",label:"Confirm Password",type:"password",variant:"outlined",required:!0,autoComplete:"new-password",margin:"normal",value:this.state.confirmPassword.value,error:this.state.confirmPassword.incorrect,helperText:this.state.confirmPassword.errorMsg,onChange:function(t){var r=t.target.value===e.state.password.value||""===t.target.value;e.setState({confirmPassword:{value:t.target.value,incorrect:!r,errorMsg:r?"":"Re-entered password does not match!"}})}})]}),Object(a.jsx)("div",{children:Object(a.jsx)(f.a,{variant:"contained",color:"primary",onClick:this.state.email.incorrect||this.state.username.incorrect||this.state.password.incorrect||this.state.confirmPassword.incorrect?function(){e.setState({email:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"},username:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"},password:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"},confirmPassword:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"}})}:function(){!function(e,t,r){I.apply(this,arguments)}(e.state.email.value,e.state.username.value,e.state.password.value)},className:"button",children:"Create account"})}),Object(a.jsx)("div",{children:Object(a.jsx)(m.a,{container:!0,children:Object(a.jsx)(m.a,{item:!0,xs:12,children:Object(a.jsx)(w.a,{component:l.b,to:"/login",children:Object(a.jsx)(y.a,{variant:"body1",align:"center",children:"Already have an account? Log in here!"})})})})})]})})}),Object(a.jsx)(m.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0})]})}}]),r}(s.a.Component),R=r(54),q=r(4),G=r(187),W=L,z="/api/thread";function $(e){return E.apply(this,arguments)}function E(){return(E=Object(N.a)(P.a.mark((function e(t){var r,a,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={ThreadID:t},W+z+"/getThread",a={success:!1,thread:{}},e.prev=3,e.next=6,Object(H.get)("https://nhc-forum.herokuapp.com/api/thread/getThread",{params:r});case 6:return n=e.sent,a.success=!0,a.thread=n.data,e.abrupt("return",a);case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}var Z=r(167),_=Object(Z.a)((function(e){return{paper:{maxWidth:"vw",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2),borderWidth:10,borderColor:"black"},box:{cursor:"pointer"}}}));function J(e){var t=_();return Object(a.jsx)(G.a,{className:t.box,children:Object(a.jsx)(v.a,{className:t.paper,onClick:function(){console.log(e.title)},children:Object(a.jsxs)(m.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(a.jsx)(m.a,{item:!0,children:Object(a.jsx)(O.a,{children:e.author.AuthorName[0].toUpperCase()})}),Object(a.jsx)(m.a,{item:!0,xs:!0,zeroMinWidth:!0,children:Object(a.jsx)(y.a,{noWrap:!0,align:"left",children:e.title})})]})})})}function K(){return(K=Object(N.a)(P.a.mark((function e(t){var r,n,s,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Getting previews"),r=[],e.t0=P.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=13;break}return n=e.t1.value,e.next=7,$(t[n]);case 7:s=e.sent,console.log(s),c={AuthorName:s.thread.AuthorUsername,AuthorID:s.thread.AuthorID},r.push(Object(a.jsx)(J,{author:c,title:s.thread.Title})),e.next=3;break;case 13:return console.log("Got previews\n"),console.log(r),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Q=J,V=function(){var e=Object(N.a)(P.a.mark((function e(){var t,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={success:!0,threads:[]},W+"/api/hotPosts",e.prev=2,e.next=5,Object(H.get)("https://nhc-forum.herokuapp.com/api/hotPosts");case 5:r=e.sent,t.threads=r.data.IDs,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t.success=!1,console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(N.a)(P.a.mark((function e(){var t,r;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={success:!0,threads:[]},W+"/api/newPosts",e.prev=2,e.next=5,Object(H.get)("https://nhc-forum.herokuapp.com/api/newPosts");case 5:r=e.sent,t.threads=r.data.IDs,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),t.success=!1,console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),Y=(n.Component,r(177)),ee=r(179),te=r(164),re=r(180),ae=r(181),ne=r(182),se=r(189),ce=r(5),oe=r(168),ie=r(169),le=r(170),ue=r(171),de=r(172),he=r(173),pe=r(174),je=r(175),be=r(176),me={Home:Object(a.jsx)(oe.a,{}),New:Object(a.jsx)(ie.a,{}),Hot:Object(a.jsx)(le.a,{}),Followed:Object(a.jsx)(ue.a,{}),"Create Thread":Object(a.jsx)(de.a,{}),"Search Thread":Object(a.jsx)(he.a,{}),"My Account":Object(a.jsx)(pe.a,{}),Logout:Object(a.jsx)(je.a,{}),Login:Object(a.jsx)(be.a,{})},ge={Home:!1,New:!1,Hot:!1,Followed:!0,"Create Thread":!0,"Search Thread":!1,"My Account":!0,Logout:!0,Login:!1},ve=r(178);var Oe={Home:function(e){console.log("navHome")},New:function(e){console.log("navNew")},Hot:function(e){console.log("navHot")},Followed:function(e,t){console.log("navFollow")},"Create Thread":function(e,t){console.log("navCreate")},"Search Thread":function(e){console.log("navSearch"),alert("This feature is not yet implemented!")},"My Account":function(e,t){console.log("navAccount"),alert("This feature is not yet implemented!")},Logout:function(e,t){D(e.id,e.token).then((function(){e.tokenHandler(""),e.idHandler(""),t(Object(a.jsx)(u.a,{to:"/"}))}))},Login:function(e){e(Object(a.jsx)(u.a,{to:"/login"}))}},xe=r(68),fe=220,we=function(e){return{drawer:{width:fe,flexShrink:0},drawerPaper:{width:fe},drawerHeader:Object(xe.a)(Object(xe.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-220},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},ye=function(e){Object(j.a)(r,e);var t=Object(b.a)(r);function r(){return Object(d.a)(this,r),t.apply(this,arguments)}return Object(h.a)(r,[{key:"navList",value:function(e){var t=this,r=this.props.session.token,n=this.props.session;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:e.drawerHeader,align:"right",children:Object(a.jsx)(Y.a,{onClick:this.props.closeHandler,children:Object(a.jsx)(ve.a,{})})}),Object(a.jsx)(ee.a,{}),Object(a.jsx)(te.a,{children:["Home","New","Hot","Followed"].map((function(e){return r||!ge[e]?Object(a.jsxs)(re.a,{button:!0,onClick:function(){ge[e]?Oe[e](n,t.props.redirectAdder):Oe[e](t.props.redirectAdder)},children:[Object(a.jsx)(ae.a,{children:me[e]}),Object(a.jsx)(ne.a,{children:e})]},e):Object(a.jsx)(a.Fragment,{})}))}),Object(a.jsx)(ee.a,{}),Object(a.jsx)(te.a,{children:["Create Thread","Search Thread"].map((function(e){return r||!ge[e]?Object(a.jsxs)(re.a,{button:!0,onClick:function(){ge[e]?Oe[e](n,t.props.redirectAdder):Oe[e](t.props.redirectAdder)},children:[Object(a.jsx)(ae.a,{children:me[e]}),Object(a.jsx)(ne.a,{children:e})]},e):Object(a.jsx)(a.Fragment,{})}))}),Object(a.jsx)(ee.a,{}),Object(a.jsx)(te.a,{children:["My Account","Logout","Login"].map((function(e){return!r&&ge[e]||r&&"Login"===e?Object(a.jsx)(a.Fragment,{}):Object(a.jsxs)(re.a,{button:!0,onClick:function(){ge[e]?Oe[e](n,t.props.redirectAdder):Oe[e](t.props.redirectAdder)},children:[Object(a.jsx)(ae.a,{children:me[e]}),Object(a.jsx)(ne.a,{children:e})]},e)}))})]})}},{key:"render",value:function(){var e=this.props.classes;return Object(a.jsx)(se.a,{className:e.drawer,anchor:"left",open:this.props.navBarOpen,variant:"persistent",classes:{paper:e.drawerPaper},children:this.navList(this.props)})}}]),r}(s.a.Component),ke=Object(ce.a)(we,{withTheme:!0})(ye),Ce=r(183),Te=r(184),Se=r(185),Pe=function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(fe,"px)"),marginLeft:fe,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},bodyBox:{paddingTop:"6em"},bodyBoxShift:{width:"calc(100% - ".concat(fe,"px)"),marginLeft:fe,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}}},Ne=function(e){Object(j.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).state={newThreadsPreviews:[]},a}return Object(h.a)(r,[{key:"componentDidMount",value:function(){var e,t=this;console.log("Getting new threads ids"),X().then((function(r){e=r.threads,console.log("Got new threads ids"),console.log(e),function(e){return K.apply(this,arguments)}(e).then((function(e){t.setState({newThreadsPreviews:e}),console.log(t.state.newThreadsPreviews)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.newThreadsPreviews.length?Object(a.jsx)(a.Fragment,{children:this.state.newThreadsPreviews}):Object(a.jsx)("span",{style:{color:"white"},children:"Loading..."})}}]),r}(n.Component),Le=function(e){Object(j.a)(r,e);var t=Object(b.a)(r);function r(e){var a;return Object(d.a)(this,r),(a=t.call(this,e)).state={navBarOpen:!0,redirects:[]},a.handleDrawerClose=a.handleDrawerClose.bind(Object(p.a)(a)),a.handleDrawerOpen=a.handleDrawerOpen.bind(Object(p.a)(a)),a.addRedirect=a.addRedirect.bind(Object(p.a)(a)),a}return Object(h.a)(r,[{key:"handleDrawerOpen",value:function(){this.setState({navBarOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({navBarOpen:!1})}},{key:"addRedirect",value:function(e){this.setState({navBarOpen:this.state.navBarOpen,redirects:[e]})}},{key:"render",value:function(){var e=this.props.classes;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(g.a,{}),Object(a.jsx)(Ce.a,{position:"fixed",className:Object(q.a)(e.appBar,Object(R.a)({},e.appBarShift,this.state.navBarOpen)),children:Object(a.jsxs)(Te.a,{children:[Object(a.jsx)(Y.a,{color:"inherit","aria-label":"open drawer",onClick:this.handleDrawerOpen,edge:"start",className:Object(q.a)(e.menuButton,this.state.navBarOpen&&e.hide),children:Object(a.jsx)(Se.a,{})}),Object(a.jsx)(y.a,{variant:"h6",noWrap:!0,children:"NHC Forum"})]})}),Object(a.jsx)(ke,{session:this.props.session,closeHandler:this.handleDrawerClose,navBarOpen:this.state.navBarOpen,redirectAdder:this.addRedirect}),Object(a.jsx)(G.a,{className:Object(q.a)(e.bodyBox,Object(R.a)({},e.bodyBoxShift,this.state.navBarOpen),"root"),children:Object(a.jsxs)(m.a,{container:!0,children:[Object(a.jsx)(m.a,{item:!0,xs:!0,sm:!0,md:!0}),Object(a.jsx)(m.a,{item:!0,xs:12,sm:8,md:6,children:Object(a.jsx)(Ne,{})}),Object(a.jsx)(m.a,{item:!0,xs:!0,sm:!0,md:!0})]})}),this.state.redirects]})}}]),r}(s.a.Component),Me=Object(ce.a)(Pe,{withTheme:!0})(Le);r(131);var Be=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),r=t[0],s=t[1],c=Object(n.useState)(""),o=Object(i.a)(c,2),d={token:r,id:o[0],tokenHandler:s,idHandler:o[1]};return Object(a.jsx)(l.a,{basename:"nhc-forum",children:Object(a.jsxs)(u.d,{children:[Object(a.jsx)(u.b,{path:"/login",component:function(){return Object(a.jsx)(F,{session:d})}}),Object(a.jsx)(u.b,{path:"/register",component:function(){return Object(a.jsx)(U,{session:d})}}),Object(a.jsx)(u.b,{path:"/",component:function(){return Object(a.jsx)(Me,{session:d})}})]})})},He=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,193)).then((function(t){var r=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;r(e),a(e),n(e),s(e),c(e)}))};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Be,{})}),document.getElementById("root")),He()},84:function(e,t,r){}},[[132,1,2]]]);