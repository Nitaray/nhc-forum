(this["webpackJsonpnhc-forum"]=this["webpackJsonpnhc-forum"]||[]).push([[0],{108:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(0),s=a.n(r),c=a(11),o=a.n(c),i=(a(108),a(25)),l=a(57),d=a(38),u=a(15),h=a(26),p=a(18),j=a(19),b=a(13),O=a(21),m=a(20),g=a(4),v=a(190),x=a(184),f=a(185),w=a(137),y=a(193),k=a(189),C=a(186),T=a(187),D=a(58),B=a(6),S=a(88),P=a.n(S),N=function(e,t){var a={email:{type:"email",pattern:/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/},username:{type:"username",pattern:/^(?=.{6,20}$)(?![_.])(?!.*[_.]{2})[a-zA-Z0-9]+(?<![_.])$/},password:{type:"password",pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/}};for(var n in a)if(a[n].type===t)return a[n].pattern.test(e);return!1},H=a(7),R=a.n(H),M=a(12),A="https://nhc-forum.herokuapp.com",I=A,L="/api/register",F=a(17),U=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={success:!1,userID:"",userToken:""},r={Username:t,Password:a},I+"/api/login",e.prev=3,e.next=6,Object(F.post)("https://nhc-forum.herokuapp.com/api/login",r);case 6:return s=e.sent,n.success=!0,n.userID=s.data.UserID,n.userToken=s.data.UserToken,e.abrupt("return",n);case 13:e.prev=13,e.t0=e.catch(3),console.log(e.t0);case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Logging out with ".concat(t," and ").concat(a)),n={success:!1},r={UserID:t,UserToken:a},I+"/api/logout",e.prev=4,e.next=7,Object(F.post)("https://nhc-forum.herokuapp.com/api/logout",r);case 7:return n.success=!0,e.abrupt("return",n);case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}();function G(){return(G=Object(M.a)(R.a.mark((function e(t,a,n){var r,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={success:!1},s={Email:t,Username:a,Password:n},I+L,e.prev=3,e.next=6,Object(F.post)("https://nhc-forum.herokuapp.com/api/register",s);case 6:return r.success=!0,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0);case 13:return e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}var q=220,z=function(e){return{root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(q,"px)"),marginLeft:q,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:q,flexShrink:0},drawerPaper:{width:q},drawerHeader:Object(i.a)(Object(i.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-end"}),content:{flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-220},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}},$=function(e){return{root:{display:"flex",height:"100vh",backgroundImage:"url(https://wallpaperaccess.com/full/1682029.jpg)",backgroundPosition:"center"},bodyBox:{paddingTop:"6em"},bodyBoxShift:{width:"calc(100% - ".concat(q,"px)"),marginLeft:q,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})}}},E=function(e){return{avatar:{margin:e.spacing(1),backgroundColor:e.palette.success.main}}},Z=a(174),_=a(176),J=a(177),K=a(178),Q=a(179),V=a(180),X=a(181),Y=a(182),ee=a(192),te=a(163),ae=a(166),ne=a(167),re=a(168),se=a(169),ce=a(170),oe=a(171),ie=a(172),le=a(173),de={Home:Object(n.jsx)(te.a,{}),New:Object(n.jsx)(ae.a,{}),Hot:Object(n.jsx)(ne.a,{}),Followed:Object(n.jsx)(re.a,{}),"Create Thread":Object(n.jsx)(se.a,{}),"Search Thread":Object(n.jsx)(ce.a,{}),"My Account":Object(n.jsx)(oe.a,{}),Logout:Object(n.jsx)(ie.a,{}),Login:Object(n.jsx)(le.a,{})},ue={Home:!1,New:!1,Hot:!1,Followed:!0,"Create Thread":!0,"Search Thread":!1,"My Account":!0,Logout:!0,Login:!1},he=a(175),pe=a(183);var je={Home:function(e,t){e(Object(n.jsx)(u.a,{to:"/"}))},New:function(e,t){e(Object(n.jsx)(u.a,{to:"/"})),t?t("News"):console.log("Redirecting only")},Hot:function(e,t){e(Object(n.jsx)(u.a,{to:"/"})),t?t("Hot"):console.log("Redirecting only")},Followed:function(e,t,a){t(Object(n.jsx)(u.a,{to:"/"})),a?a("Followed"):console.log("Redirecting only")},"Create Thread":function(e,t){console.log("Redirecting to create Thread"),t(Object(n.jsx)(u.a,{to:"/createThread"}))},"Search Thread":function(e){console.log("navSearch"),alert("This feature is not yet implemented!")},"My Account":function(e,t){console.log("navAccount"),alert("This feature is not yet implemented!")},Logout:function(e,t){W(e.id,e.token).then((function(){e.tokenHandler(""),e.idHandler(""),t(Object(n.jsx)(u.a,{to:"/"}))}))},Login:function(e){e(Object(n.jsx)(u.a,{to:"/login"}))}},be=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(j.a)(a,[{key:"navList",value:function(e){var t=this,a=this.props.session.token,r=this.props.session;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:e.drawerHeader,align:"right",children:Object(n.jsx)(Z.a,{onClick:this.props.closeHandler,children:Object(n.jsx)(he.a,{})})}),Object(n.jsx)(_.a,{}),Object(n.jsx)(J.a,{children:["Home","New","Hot","Followed"].map((function(e){return a||!ue[e]?Object(n.jsxs)(K.a,{button:!0,onClick:function(){ue[e]?je[e](r,t.props.redirectAdder,t.props.threadTypeHandler):je[e](t.props.redirectAdder,t.props.threadTypeHandler)},children:[Object(n.jsx)(Q.a,{children:de[e]}),Object(n.jsx)(V.a,{children:e})]},e):Object(n.jsx)(n.Fragment,{})}))}),Object(n.jsx)(_.a,{}),Object(n.jsx)(J.a,{children:["Create Thread","Search Thread"].map((function(e){return a||!ue[e]?Object(n.jsxs)(K.a,{button:!0,onClick:function(){ue[e]?je[e](r,t.props.redirectAdder):je[e](t.props.redirectAdder)},children:[Object(n.jsx)(Q.a,{children:de[e]}),Object(n.jsx)(V.a,{children:e})]},e):Object(n.jsx)(n.Fragment,{})}))}),Object(n.jsx)(_.a,{}),Object(n.jsx)(J.a,{children:["My Account","Logout","Login"].map((function(e){return!a&&ue[e]||a&&"Login"===e?Object(n.jsx)(n.Fragment,{}):Object(n.jsxs)(K.a,{button:!0,onClick:function(){ue[e]?je[e](r,t.props.redirectAdder):je[e](t.props.redirectAdder)},children:[Object(n.jsx)(Q.a,{children:de[e]}),Object(n.jsx)(V.a,{children:e})]},e)}))})]})}},{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(X.a,{position:"fixed",className:Object(g.a)(e.appBar,Object(h.a)({},e.appBarShift,this.props.navBarOpen)),children:Object(n.jsxs)(Y.a,{children:[Object(n.jsx)(Z.a,{color:"inherit","aria-label":"open drawer",onClick:this.props.openHandler,edge:"start",className:Object(g.a)(e.menuButton,this.props.navBarOpen&&e.hide),children:Object(n.jsx)(pe.a,{})}),Object(n.jsx)(D.a,{variant:"h6",noWrap:!0,children:"NHC Forum"})]})}),Object(n.jsx)(ee.a,{className:e.drawer,anchor:"left",open:this.props.navBarOpen,variant:"persistent",classes:{paper:e.drawerPaper},children:this.navList(this.props)})]})}}]),a}(s.a.Component),Oe=Object(B.a)(z,{withTheme:!0})(be),me=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={username:{value:"",incorrect:!1,errorMsg:""},password:{value:""},navBarOpen:!0,redirects:[]},n.handleDrawerClose=n.handleDrawerClose.bind(Object(b.a)(n)),n.handleDrawerOpen=n.handleDrawerOpen.bind(Object(b.a)(n)),n.addRedirect=n.addRedirect.bind(Object(b.a)(n)),n}return Object(j.a)(a,[{key:"handleDrawerOpen",value:function(){this.setState({navBarOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({navBarOpen:!1})}},{key:"addRedirect",value:function(e){this.setState({navBarOpen:this.state.navBarOpen,redirects:[e]})}},{key:"handleLogin",value:function(e,t){var a=this;console.log("Logging in"),U(e,t).then((function(e){if(e.success){var t=e.userID,n=e.userToken;a.props.session.idHandler(t),a.props.session.tokenHandler(n),console.log("Logged in with token ".concat(n)),console.log(a.props.session)}else alert("Login error! Please try again!")}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.session.token?Object(n.jsx)(u.a,{to:"/"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Oe,{session:this.props.session,closeHandler:this.handleDrawerClose,openHandler:this.handleDrawerOpen,navBarOpen:this.state.navBarOpen,redirectAdder:this.addRedirect,threadTypeHandler:this.handleThreadType}),Object(n.jsx)(v.a,{className:Object(g.a)(t.bodyBox,Object(h.a)({},t.bodyBoxShift,this.state.navBarOpen),"root"),children:Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(f.a,{}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0}),Object(n.jsx)(x.a,{item:!0,xs:12,sm:8,md:6,lg:4,children:Object(n.jsx)("div",{align:"center",children:Object(n.jsxs)(w.a,{className:"paper",variant:"outlined",children:[Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"LOGIN TO NHC FORUM"})}),Object(n.jsx)("div",{children:Object(n.jsx)(y.a,{className:t.avatar,children:Object(n.jsx)(P.a,{})})}),Object(n.jsxs)("div",{children:[Object(n.jsx)(k.a,{id:"username",label:"Username",className:"textfield",type:"text",value:this.state.username.value,variant:"outlined",required:!0,autoComplete:"username",margin:"normal",error:this.state.username.incorrect,helperText:this.state.username.errorMsg,onChange:function(t){var a=N(t.target.value,"username")||""===t.target.value;e.setState({username:{value:t.target.value,incorrect:!a,errorMsg:a?"":"Invalid username"}})}}),Object(n.jsx)(k.a,{id:"password",className:"textfield",label:"Password",type:"password",variant:"outlined",required:!0,autoComplete:"current-password",margin:"normal",onChange:function(t){e.setState({password:{value:t.target.value}})}})]}),Object(n.jsx)("div",{children:Object(n.jsx)(C.a,{variant:"contained",color:"primary",className:"button",onClick:this.state.username.incorrect?function(){e.setState({username:{value:"",incorrect:!0,errorMsg:"Invalid username! Please try again!"}})}:function(){e.handleLogin(e.state.username.value,e.state.password.value)},children:"Login"})}),Object(n.jsx)("div",{children:Object(n.jsx)(x.a,{container:!0,children:Object(n.jsx)(x.a,{item:!0,xs:12,children:Object(n.jsx)(T.a,{component:d.b,to:"/register",children:Object(n.jsx)(D.a,{variant:"body1",align:"center",children:"Don't have an account? Sign up here!"})})})})})]})})}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0})]})}),this.state.redirects]})}}]),a}(s.a.Component),ge=Object(B.a)((function(e){return Object(i.a)(Object(i.a)({},$(e)),E(e))}),{withTheme:!0})(me),ve=(a(133),function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={email:{value:"",incorrect:!1,errorMsg:""},username:{value:"",incorrect:!1,errorMsg:""},password:{value:"",incorrect:!1,errorMsg:""},confirmPassword:{value:"",incorrect:!1,errorMsg:""},navBarOpen:!0,redirects:[]},n.handleDrawerClose=n.handleDrawerClose.bind(Object(b.a)(n)),n.handleDrawerOpen=n.handleDrawerOpen.bind(Object(b.a)(n)),n.addRedirect=n.addRedirect.bind(Object(b.a)(n)),n}return Object(j.a)(a,[{key:"handleDrawerOpen",value:function(){this.setState({navBarOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({navBarOpen:!1})}},{key:"addRedirect",value:function(e){this.setState({navBarOpen:this.state.navBarOpen,redirects:[e]})}},{key:"handleRegister",value:function(e,t,a){var r=this;console.log("Logging in"),function(e,t,a){return G.apply(this,arguments)}(e,t,a).then((function(e){if(e.success){var t=e.userID,a=e.userToken;r.props.session.idHandler(t),r.props.session.tokenHandler(a),console.log("Registration complete!"),alert("Registration successful! Please log in!")}else alert("Registration error! Please try again!")})),this.addRedirect(Object(n.jsx)(u.a,{to:"/login"}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.session.token?Object(n.jsx)(u.a,{to:"/"}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Oe,{session:this.props.session,closeHandler:this.handleDrawerClose,openHandler:this.handleDrawerOpen,navBarOpen:this.state.navBarOpen,redirectAdder:this.addRedirect}),Object(n.jsx)(v.a,{className:Object(g.a)(t.bodyBox,Object(h.a)({},t.bodyBoxShift,this.state.navBarOpen),t.root),children:Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(f.a,{}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0}),Object(n.jsx)(x.a,{item:!0,xs:12,sm:8,md:6,lg:4,children:Object(n.jsx)("div",{align:"center",children:Object(n.jsxs)(w.a,{className:"paper",variant:"outlined",children:[Object(n.jsx)("div",{children:Object(n.jsx)("h1",{children:"Create a new NHC account"})}),Object(n.jsxs)("div",{children:[Object(n.jsx)(k.a,{id:"email",label:"Email",className:"textfield",type:"text",value:this.state.email.value,variant:"outlined",required:!0,autoComplete:"email",margin:"normal",error:this.state.email.incorrect,helperText:this.state.email.errorMsg,onChange:function(t){var a=N(t.target.value,"email")||""===t.target.value;e.setState({email:{value:t.target.value,incorrect:!a,errorMsg:a?"":"Invalid email address"}})}}),Object(n.jsx)(k.a,{id:"username",label:"Username",className:"textfield",type:"text",value:this.state.username.value,variant:"outlined",required:!0,autoComplete:"username",margin:"normal",error:this.state.username.incorrect,helperText:this.state.username.errorMsg,onChange:function(t){var a=N(t.target.value,"username")||""===t.target.value;e.setState({username:{value:t.target.value,incorrect:!a,errorMsg:a?"":"Username must be 6-20 characters long, and does not contain special characters!"}})}}),Object(n.jsx)(k.a,{id:"password",className:"textfield",label:"Password",type:"password",variant:"outlined",required:!0,autoComplete:"new-password",margin:"normal",value:this.state.password.value,error:this.state.password.incorrect,helperText:this.state.password.errorMsg,onChange:function(t){var a=N(t.target.value,"password")||""===t.target.value;e.setState({password:{value:t.target.value,incorrect:!a,errorMsg:a?"":"Password must be at least 8 characters long and contains at least one letter and one number!"}})}}),Object(n.jsx)(k.a,{id:"confirm-password",className:"textfield",label:"Confirm Password",type:"password",variant:"outlined",required:!0,autoComplete:"new-password",margin:"normal",value:this.state.confirmPassword.value,error:this.state.confirmPassword.incorrect,helperText:this.state.confirmPassword.errorMsg,onChange:function(t){var a=t.target.value===e.state.password.value||""===t.target.value;e.setState({confirmPassword:{value:t.target.value,incorrect:!a,errorMsg:a?"":"Re-entered password does not match!"}})}})]}),Object(n.jsx)("div",{children:Object(n.jsx)(C.a,{variant:"contained",color:"primary",onClick:this.state.email.incorrect||this.state.username.incorrect||this.state.password.incorrect||this.state.confirmPassword.incorrect?function(){e.setState({email:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"},username:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"},password:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"},confirmPassword:{value:"",incorrect:!0,errorMsg:"Invalid information! Please try again!"}})}:function(){e.handleRegister(e.state.email.value,e.state.username.value,e.state.password.value)},className:"button",children:"Create account"})}),Object(n.jsx)("div",{children:Object(n.jsx)(x.a,{container:!0,children:Object(n.jsx)(x.a,{item:!0,xs:12,children:Object(n.jsx)(T.a,{component:d.b,to:"/login",children:Object(n.jsx)(D.a,{variant:"body1",align:"center",children:"Already have an account? Log in here!"})})})})})]})})}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0})]})}),this.state.redirects]})}}]),a}(s.a.Component)),xe=Object(B.a)($,{withTheme:!0})(ve),fe=A,we="/api/thread",ye="/api/comment",ke="/api/followedPosts";function Ce(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(M.a)(R.a.mark((function e(t){var a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={ThreadID:t},fe+we+"/getThread",n={success:!1,thread:{}},e.prev=3,e.next=6,Object(F.get)("https://nhc-forum.herokuapp.com/api/thread/getThread",{params:a});case 6:r=e.sent,n.success=!0,n.thread=r.data,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function De(){return(De=Object(M.a)(R.a.mark((function e(t,a,n,r){var s,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={success:!1},c={ThreadTitle:t,Content:a,CreatorID:n,UserToken:r},fe+we+"/createThread",e.prev=3,e.next=6,Object(F.post)("https://nhc-forum.herokuapp.com/api/thread/createThread",c);case 6:s.success=!0,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0);case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}var Be=a(188),Se=Object(Be.a)((function(e){return{paper:{maxWidth:"vw",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2),borderWidth:10,borderColor:"black"},box:{cursor:"pointer"}}}));function Pe(e){var t=Se(),a=Object(r.useState)(!1),s=Object(l.a)(a,2),c=s[0],o=s[1];return c?Object(n.jsx)(u.a,{to:{pathname:"/thread",state:{id:e.id}}}):Object(n.jsx)(v.a,{className:t.box,children:Object(n.jsx)(w.a,{className:t.paper,onClick:function(){o(!0)},children:Object(n.jsxs)(x.a,{container:!0,wrap:"nowrap",spacing:2,children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(y.a,{children:e.author.AuthorName[0].toUpperCase()})}),Object(n.jsx)(x.a,{item:!0,xs:!0,zeroMinWidth:!0,children:Object(n.jsxs)(D.a,{noWrap:!0,align:"left",children:[Object(n.jsx)(v.a,{fontWeight:"fontWeightBold",children:e.title}),Object(n.jsx)(v.a,{fontStyle:"italic",children:e.author.AuthorName})]})})]})})})}function Ne(e){return He.apply(this,arguments)}function He(){return(He=Object(M.a)(R.a.mark((function e(t){var a,r,s,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Getting previews"),a=[],e.t0=R.a.keys(t);case 3:if((e.t1=e.t0()).done){e.next=13;break}return r=e.t1.value,e.next=7,Ce(t[r]);case 7:s=e.sent,console.log(s),c={AuthorName:s.thread.AuthorUsername,AuthorID:s.thread.AuthorID},a.push(Object(n.jsx)(Pe,{id:t[r],author:c,title:s.thread.Title,dateCreated:s.thread.CreationDate})),e.next=3;break;case 13:return console.log("Got previews\n"),console.log(a),e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=function(){var e=Object(M.a)(R.a.mark((function e(){var t,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={success:!1,threads:[]},fe+"/api/hotPosts",e.prev=2,e.next=5,Object(F.get)("https://nhc-forum.herokuapp.com/api/hotPosts");case 5:a=e.sent,t.threads=a.data.IDs,t.success=!0,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(M.a)(R.a.mark((function e(){var t,a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={success:!1,threads:[]},fe+"/api/newPosts",e.prev=2,e.next=5,Object(F.get)("https://nhc-forum.herokuapp.com/api/newPosts");case 5:a=e.sent,t.threads=a.data.IDs,t.success=!0,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),Ae=function(){var e=Object(M.a)(R.a.mark((function e(t,a){var n,r,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={success:!1,threads:[]},r={UserID:t,UserToken:a},fe+ke+"/getFollows",e.prev=3,e.next=6,Object(F.get)("https://nhc-forum.herokuapp.com/api/followedPosts/getFollows",{params:r});case 6:s=e.sent,n.threads=s.data.IDs,n.success=!0,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,a){return e.apply(this,arguments)}}(),Ie=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={hotThreadsPreviews:[]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;console.log("Getting hot threads ids"),Re().then((function(a){e=a.threads,console.log("Got hot threads ids"),console.log(e),Ne(e).then((function(e){t.setState({hotThreadsPreviews:e}),console.log(t.state.hotThreadsPreviews)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.hotThreadsPreviews.length?Object(n.jsx)(n.Fragment,{children:this.state.hotThreadsPreviews}):Object(n.jsx)("span",{style:{color:"white",cursor:"progress"},children:"Loading..."})}}]),a}(r.Component),Le=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={newThreadsPreviews:[]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;console.log("Getting new threads ids"),Me().then((function(a){e=a.threads,console.log("Got new threads ids"),console.log(e),Ne(e).then((function(e){t.setState({newThreadsPreviews:e}),console.log(t.state.newThreadsPreviews)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.newThreadsPreviews.length?Object(n.jsx)(n.Fragment,{children:this.state.newThreadsPreviews}):Object(n.jsx)("span",{style:{color:"white",cursor:"progress"},children:"Loading..."})}}]),a}(r.Component),Fe=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={followedThreadPreviews:[]},n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e,t=this;console.log("Getting followed threads ids"),Ae(this.props.session.id,this.props.session.token).then((function(a){e=a.threads,console.log("Got followed threads ids"),console.log(e),Ne(e).then((function(e){t.setState({followedThreadPreviews:e}),console.log(t.state.followedThreadPreviews)}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return this.state.followedThreadPreviews.length?Object(n.jsx)(n.Fragment,{children:this.state.followedThreadPreviews}):Object(n.jsx)("span",{style:{color:"white",cursor:"progress"},children:"Loading..."})}}]),a}(r.Component),Ue=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={navBarOpen:!0,redirects:[],threadType:"New"},n.handleDrawerClose=n.handleDrawerClose.bind(Object(b.a)(n)),n.handleDrawerOpen=n.handleDrawerOpen.bind(Object(b.a)(n)),n.addRedirect=n.addRedirect.bind(Object(b.a)(n)),n.handleThreadType=n.handleThreadType.bind(Object(b.a)(n)),n}return Object(j.a)(a,[{key:"handleDrawerOpen",value:function(){this.setState({navBarOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({navBarOpen:!1})}},{key:"addRedirect",value:function(e){this.setState({navBarOpen:this.state.navBarOpen,redirects:[e]})}},{key:"handleThreadType",value:function(e){this.setState({threadType:e})}},{key:"render",value:function(){var e=this,t=this.props.classes;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f.a,{}),Object(n.jsx)(Oe,{session:this.props.session,closeHandler:this.handleDrawerClose,openHandler:this.handleDrawerOpen,navBarOpen:this.state.navBarOpen,redirectAdder:this.addRedirect,threadTypeHandler:this.handleThreadType}),Object(n.jsx)(v.a,{className:Object(g.a)(t.bodyBox,Object(h.a)({},t.bodyBoxShift,this.state.navBarOpen),"root"),children:Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0}),Object(n.jsx)(x.a,{item:!0,xs:12,sm:8,md:6,children:function(){switch(e.state.threadType){case"Hot":return Object(n.jsx)(Ie,{});case"Followed":return Object(n.jsx)(Fe,{session:e.props.session});default:return Object(n.jsx)(Le,{})}}()}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0})]})}),this.state.redirects]})}}]),a}(s.a.Component),We=Object(B.a)($,{withTheme:!0})(Ue),Ge=function(e){return{paper:{maxWidth:"vw",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2),borderWidth:10,borderColor:"black"},textfield:{width:"100%"}}},qe=function(){var e=Object(M.a)(R.a.mark((function e(t){var a,n,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={success:!0,comment:{}},n={CommentID:t},fe+ye+"/getComment",e.prev=3,e.next=6,Object(F.get)("https://nhc-forum.herokuapp.com/api/comment/getComment",{params:n});case 6:return r=e.sent,a.comment=r.data,console.log("Getting comment with id ".concat(t)),console.log(a.comment),e.abrupt("return",a);case 13:e.prev=13,e.t0=e.catch(3),a.success=!1,console.log(e.t0);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),ze=Object(Be.a)((function(e){return{paper:{maxWidth:"vw",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(2),borderWidth:10,borderColor:"black"}}}));function $e(e){var t=ze();return Object(n.jsx)(v.a,{className:t.box,children:Object(n.jsx)(w.a,{className:t.paper,children:Object(n.jsxs)(x.a,{container:!0,spacing:2,children:[Object(n.jsx)(x.a,{item:!0,children:Object(n.jsx)(y.a,{children:e.author.AuthorName[0].toUpperCase()})}),Object(n.jsx)(x.a,{item:!0,xs:!0,zeroMinWidth:!0,children:Object(n.jsx)(D.a,{align:"left",children:e.content})})]})})})}function Ee(){return(Ee=Object(M.a)(R.a.mark((function e(t){var a,r,s,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Getting comments"),console.log(t),a=[],e.t0=R.a.keys(t);case 4:if((e.t1=e.t0()).done){e.next=14;break}return r=e.t1.value,e.next=8,qe(t[r]);case 8:s=e.sent,console.log(s),c={AuthorName:s.comment.AuthorUsername,AuthorID:s.comment.AuthorID},a.push(Object(n.jsx)($e,{id:t[r],author:c,content:s.comment.Content,dateCreated:s.comment.CreationDate})),e.next=4;break;case 14:return console.log("Got comments\n"),console.log(a),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ze=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={author:{},title:"",content:"",dateCreated:"",comments:[],navBarOpen:!0,redirects:[]},n.handleDrawerClose=n.handleDrawerClose.bind(Object(b.a)(n)),n.handleDrawerOpen=n.handleDrawerOpen.bind(Object(b.a)(n)),n.addRedirect=n.addRedirect.bind(Object(b.a)(n)),n}return Object(j.a)(a,[{key:"componentDidMount",value:function(){var e=this,t={};Ce(this.props.location.state.id).then((function(a){a.success&&(t=a.thread),e.setState({author:{id:t.AuthorID,name:t.AuthorUsername},title:t.Title,content:t.Content,dateCreated:t.CreationDate}),function(e){return Ee.apply(this,arguments)}(t.CommentIDs).then((function(t){e.setState({comments:t})}))}))}},{key:"handleDrawerOpen",value:function(){this.setState({navBarOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({navBarOpen:!1})}},{key:"addRedirect",value:function(e){this.setState({navBarOpen:this.state.navBarOpen,redirects:[e]})}},{key:"render",value:function(){var e=this.props.classes;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Oe,{session:this.props.session,closeHandler:this.handleDrawerClose,openHandler:this.handleDrawerOpen,navBarOpen:this.state.navBarOpen,redirectAdder:this.addRedirect}),Object(n.jsx)(v.a,{className:Object(g.a)(e.bodyBox,Object(h.a)({},e.bodyBoxShift,this.state.navBarOpen),e.root),children:Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(f.a,{}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0}),Object(n.jsxs)(x.a,{item:!0,xs:11,sm:10,md:9,children:[Object(n.jsx)(w.a,{className:e.paper,children:Object(n.jsxs)(D.a,{children:[Object(n.jsx)(v.a,{fontWeight:"fontWeightBold",fontSize:26,children:this.state.title}),Object(n.jsx)(v.a,{fontStyle:"italic",children:this.state.dateCreated.slice(0,10)}),Object(n.jsx)(v.a,{fontStyle:"italic",fontWeight:"fontWeightBold",children:this.state.author.name})]})}),Object(n.jsx)(w.a,{className:e.paper,children:Object(n.jsx)(k.a,{id:"content",label:"Content",className:e.textfield,type:"text",value:this.state.content,variant:"outlined",InputProps:{readOnly:!0},margin:"normal",multiline:!0,rows:4,rowsMax:16})}),function(){for(var e=[],t=0;t<30;t++)e.push(Object(n.jsx)(_.a,{}));return e}(),this.state.comments]}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0})]})}),this.state.redirects]})}}]),a}(s.a.Component),_e=Object(B.a)((function(e){return Object(i.a)(Object(i.a)({},$(e)),Ge(e))}),{withTheme:!0})(Ze),Je=function(e){return{paper:{maxWidth:"vw",margin:"".concat(e.spacing(1),"px auto"),padding:e.spacing(1),paddingLeft:e.spacing(4),paddingRight:e.spacing(4)},textfield:{width:"100%"},button:{width:"100%",color:"white",backgroundColor:e.palette.success.main}}},Ke=function(e){Object(O.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={title:"",content:"",navBarOpen:!0,redirects:[]},n.handleDrawerClose=n.handleDrawerClose.bind(Object(b.a)(n)),n.handleDrawerOpen=n.handleDrawerOpen.bind(Object(b.a)(n)),n.addRedirect=n.addRedirect.bind(Object(b.a)(n)),n}return Object(j.a)(a,[{key:"handleDrawerOpen",value:function(){this.setState({navBarOpen:!0})}},{key:"handleDrawerClose",value:function(){this.setState({navBarOpen:!1})}},{key:"addRedirect",value:function(e){this.setState({navBarOpen:this.state.navBarOpen,redirects:[e]})}},{key:"handleSubmit",value:function(e,t){var a=this;console.log("Creating Thread"),function(e,t,a,n){return De.apply(this,arguments)}(e,t,this.props.session.id,this.props.session.token).then((function(e){e.success?(console.log("Thread created successfully!"),alert("Thread created successfully!"),a.addRedirect(Object(n.jsx)(u.a,{to:"/"}))):(console.log("Failed to create thread!"),alert("Something went wrong while creating your thread! Please try again!"))}))}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.props.session.token?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Oe,{session:this.props.session,closeHandler:this.handleDrawerClose,openHandler:this.handleDrawerOpen,navBarOpen:this.state.navBarOpen,redirectAdder:this.addRedirect}),Object(n.jsx)(v.a,{className:Object(g.a)(t.bodyBox,Object(h.a)({},t.bodyBoxShift,this.state.navBarOpen),t.root),children:Object(n.jsxs)(x.a,{container:!0,children:[Object(n.jsx)(f.a,{}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0}),Object(n.jsxs)(x.a,{item:!0,xs:11,sm:10,md:9,children:[Object(n.jsx)(w.a,{className:t.paper,children:Object(n.jsx)(k.a,{id:"title",label:"Thread Title",className:t.textfield,type:"text",value:this.state.title,variant:"outlined",required:!0,autoComplete:"text",margin:"normal",onChange:function(t){e.setState({title:t.target.value})}})}),Object(n.jsx)(w.a,{className:t.paper,children:Object(n.jsx)(k.a,{id:"content",label:"Thread Content",className:t.textfield,type:"text",value:this.state.content,variant:"outlined",required:!0,autoComplete:"text",margin:"normal",multiline:!0,rows:4,rowsMax:16,onChange:function(t){e.setState({content:t.target.value})}})}),Object(n.jsx)(C.a,{variant:"contained",className:t.button,onClick:function(){e.handleSubmit(e.state.title,e.state.content)},children:"Create Thread"})]}),Object(n.jsx)(x.a,{item:!0,xs:!0,sm:!0,md:!0,lg:!0})]})}),this.state.redirects]}):Object(n.jsx)(u.a,{to:"/"})}}]),a}(s.a.Component),Qe=Object(B.a)((function(e){return Object(i.a)(Object(i.a)({},$(e)),Je(e))}),{withTheme:!0})(Ke),Ve=(a(134),a(89));var Xe=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(r.useState)(""),o=Object(l.a)(c,2),h={token:a,id:o[0],tokenHandler:s,idHandler:o[1]};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ve.a,{children:Object(n.jsx)("title",{children:"NHC Forum"})}),Object(n.jsx)(d.a,{basename:"nhc-forum",children:Object(n.jsxs)(u.d,{children:[Object(n.jsx)(u.b,{path:"/createThread",component:function(){return Object(n.jsx)(Qe,{session:h})}}),Object(n.jsx)(u.b,{path:"/thread",render:function(e){return Object(n.jsx)(_e,Object(i.a)(Object(i.a)({},e),{},{session:h}))}}),Object(n.jsx)(u.b,{path:"/login",component:function(){return Object(n.jsx)(ge,{session:h})}}),Object(n.jsx)(u.b,{path:"/register",component:function(){return Object(n.jsx)(xe,{session:h})}}),Object(n.jsx)(u.b,{path:"/",component:function(){return Object(n.jsx)(We,{session:h})}})]})})]})},Ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,196)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};o.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(Xe,{})}),document.getElementById("root")),Ye()}},[[135,1,2]]]);